var localVault = FairnetVault.all.first();
var remoteVaults = Sequence{};

for (friend in localVault.friends){
    var friendVault = new RemoteFairnetVault;
    friendVault.localVault = localVault;
    friendVault.remotePublicKey = friend.publicKey;
	remoteVaults.add(friendVault);
}

var allPosts = Sequence{};

//// request remoteVaults' and localVault's Posts in different statements
//var bobsFriendsPosts = remoteVaults.parallelCollect( rv| rv.posts.parallelSelect(p | p.isPublic = true )).flatten();
//var bobsPosts = localVault.posts.parallelSelect(p | p.isPublic = true ).flatten();
//allPosts.addAll(bobsFriendsPosts);
//allPosts.addAll(bobsPosts);

//// request remoteVaults' and localVault's Posts in ONE statement
var allVaults = Sequence{};
allVaults.add(localVault);
allVaults.addAll(remoteVaults);
allPosts = allVaults.parallelCollect( rv| rv.posts.parallelSelect(p | p.isPublic = true )).flatten();

return allPosts;


			