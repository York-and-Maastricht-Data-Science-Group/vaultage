var localVault = FairnetVault.all.first();

var remoteVaults = localVault.remoteVaults.values().asSequence();
remoteVaults.println();

var posts = Sequence{};

//var a = Sequence{1, 2};
//var b = Sequence{3, 4};
//var c = a.includingAll(b);
//c.println();

var aliceId = localVault.publicKey;

posts = remoteVaults // To Bob
			.parallelCollect(
//			rv0 | rv0.posts.includingAll(
//					rv0.remoteVaults.values().asSequence()
//						.select(x | x.remotePublicKey != aliceId) // to Charlie only
//					.parallelCollect(
//						rv3 | rv3.posts
//					)
//				) 
				rv0 | rv0.remoteVaults.values().asSequence()
						.select(x | x.remotePublicKey != aliceId) // to Charlie only
					.parallelCollect(
							rv3 | rv3.posts 	
					)
					.flatten().includingAll(rv0.posts).flatten()
			)
			.flatten();
			
return posts;

			